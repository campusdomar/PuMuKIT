<form class="modal_form"
      style="height:92%;"
      >
  <fieldset style="height:100%;overflow:auto" id="form_my_mmobjs_list">
    <br>
    {% include "PumukitNewAdminBundle:PlaylistMultimediaObject:modal_myvideos_list.html.twig" %}
  </fieldset>
  <img id="my_mmobjs_ajax_loader" src="{{asset('bundles/pumukitnewadmin/images/admin/load/spinner.gif')}}" alt="Loading more resources"/>
</form>
<script type="text/javascript">
 var calledAjax = false;
 var currentPage = 1;
 var maxPage = {{mmobjs_total/mmobjs_limit}};//my_mmobjs.getNbPages()
 var ajaxurl = "{{url("pumukitnewadmin_playlistmms_modal_mymmobjs", {'id':playlist.id, 'modal_page':'__page__', 'modal_limit': mmobjs_limit})}}";
 $("#form_my_mmobjs_list").on("scroll", function(){
     if(!calledAjax && (currentPage < maxPage) && this.offsetHeight + this.scrollTop >= this.scrollHeight) {
         calledAjax = true;
         currentPage += 1;
         $('#my_mmobjs_ajax_loader').show();
         var url = ajaxurl.replace('__page__',currentPage);
         $.get(url).done(function(data){
             $('#form_my_mmobjs_list').append(data);
             $('#my_mmobjs_ajax_loader').hide();
             calledAjax = false;
         });
     }
 });
 $("#form_my_mmobjs_list").scroll()

 $(".ajaxpagerfanta .pagination li a").on('click', function(){
     var page = $(this).data('page');
     var selected_ids = [];
     $('.tab-pane.active fieldset input:checkbox').each(function(elem){
         if($(this).prop('checked'))
             selected_ids.push($(this).prop('id'));
     });
 });
</script>
<script type="text/javascript">
 //Adds a 'select' effect when clicking and selecting a mmobj
 $(".mmobj input:checkbox").on('click', function(){
     if($(this).prop('checked')) {
         $(this).siblings(".mmobj_elem").addClass('checked');
     }
     else {
         $(this).siblings(".mmobj_elem").removeClass('checked');
     }
 });
</script>
